<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="author" content="Alex Jover Morales"><meta name="copyright" content="Alex Jover Morales"><link rel="author" type="text/html" href="https://twitter.com/alexjoverm"><link rel="icon" href="/alex.jpg"><link rel="canonical" content="http://alexjoverm.github.io/2017/09/11/Test-Properties-and-Custom-Events-in-Vue-js-Components-with-Jest/"><!-- Add to home screen for Android and modern mobile browsers--><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#008aff"><!-- Add to home screen for Safari on iOS--><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="apple-mobile-web-app-title" content="Alex Jover Blog"><link rel="apple-touch-icon" href="/images/icons/icon-152x152.png"><!-- Add to home screen for Windows--><meta name="msapplication-TileImage" content="/images/icons/icon-152x152.png"><meta name="msapplication-TileColor" content="#000000"><title>Test Properties and Custom Events in Vue.js Components with Jest | Alex Jover Morales</title><meta name="description" content="Learn different ways to test properties, events and custom events"><meta name="twitter:title" content="Test Properties and Custom Events in Vue.js Components with Jest"><meta name="twitter:description" content="Learn different ways to test properties, events and custom events"><meta name="og:title" content="Test Properties and Custom Events in Vue.js Components with Jest"><meta name="og:description" content="Learn different ways to test properties, events and custom events"><meta name="article:author" content="https://www.facebook.com/alex.jovermorales"><meta name="article:published_time" content="2017-09-11T07:30:31.000Z"><meta name="article:modified_time" content="2017-12-11T12:03:02.000Z"><meta name="article:tag" content="VueJS"><meta name="article:tag" content="JavaScript"><meta name="article:tag" content="Testing"><meta name="twitter:card" content="summary"><meta name="og:image" content="http://alexjoverm.github.io/alex.jpg"><meta name="twitter:image" content="http://alexjoverm.github.io/alex.jpg"><meta name="twitter:site" content="@alexjoverm"><meta name="twitter:creator" content="@alexjoverm"><meta name="og:site_name" content="Alex Jover"><meta name="og:locale" content="en_EN"><meta name="og:type" content="article"><meta name="og:url" content="http://alexjoverm.github.io/2017/09/11/Test-Properties-and-Custom-Events-in-Vue-js-Components-with-Jest/"><meta name="article:author" content="https://www.facebook.com/alex.jovermorales"><link rel="me" type="text/html" href="https://twitter.com/alexjoverm"><link rel="me" type="text/html" href="https://github.com/alexjoverm"><link rel="me" type="text/html" href="https://www.linkedin.com/in/alex-jover-morales-994752102/"><link rel="me" type="text/html" href="http://stackoverflow.com/users/4191146/alex-jm"><link rel="alternate" type="application/rss+xml" title="Alex Jover" href="/atom.xml"><link rel="preload" as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="preload" as="style" href="/css/bootstrap.min.css"><link rel="preload" as="style" href="/css/main.css"><link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/css/main.css"><link rel="preload" as="style" href="//fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,400,600,700"><link rel="stylesheet" defer type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,400,600,700"><meta property="algolia:search" data-application-id="6252178E0A" data-api-key="ead5c5a5a82108a54f04c9f610a54ee2" data-index-name="blog"><link rel="stylesheet" href="/css/prism-okaidia.css" type="text/css"></head><body><div id="update-message">New content is available<button onclick="location.reload()" class="btn button-white">Reload</button></div><nav class="navbar navbar-default navbar-fixed-top navbar-custom top-nav-short"><div class="container"><div class="row"><div class="col-xs-12"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Blog</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li class="search"><div id="search-box-container" class="search-box-container"><input id="search-box" type="search" placeholder="Search..." name="search" autocomplete="off" class="search-box"><svg viewbox="654 -372 1664 1664" class="search-box-icon"><path d="M1806,332c0-123.3-43.8-228.8-131.5-316.5C1586.8-72.2,1481.3-116,1358-116s-228.8,43.8-316.5,131.5  C953.8,103.2,910,208.7,910,332s43.8,228.8,131.5,316.5C1129.2,736.2,1234.7,780,1358,780s228.8-43.8,316.5-131.5  C1762.2,560.8,1806,455.3,1806,332z M2318,1164c0,34.7-12.7,64.7-38,90s-55.3,38-90,38c-36,0-66-12.7-90-38l-343-342  c-119.3,82.7-252.3,124-399,124c-95.3,0-186.5-18.5-273.5-55.5s-162-87-225-150s-113-138-150-225S654,427.3,654,332  s18.5-186.5,55.5-273.5s87-162,150-225s138-113,225-150S1262.7-372,1358-372s186.5,18.5,273.5,55.5s162,87,225,150s113,138,150,225  S2062,236.7,2062,332c0,146.7-41.3,279.7-124,399l343,343C2305.7,1098.7,2318,1128.7,2318,1164z"></path></svg></div></li><li><a href="https://egghead.io/instructors/alex-jover-morales">Videos</a></li><li><a href="/series">Series</a></li><li><a href="/archives">Archive</a></li><li><a href="/about">About</a></li></ul></div></div></div></div></nav><div id="signup-form-modal"><form action="https://github.us16.list-manage.com/subscribe/post" method="POST" class="form signup-form"><input type="hidden" name="u" value="534e314884644825b957a5eee"><input type="hidden" name="id" value="e05e60374d"><div class="close-button">&times;</div><h4 class="text-center">Get upcoming Guides, Series, EBooks and Courses!</h4><div class="col-sm-4 fields"><label><input id="MERGE0" type="email" required placeholder="Your email" autocapitalize="off" autocorrect="off" name="MERGE0" class="form-control"></label></div><div class="col-sm-4 fields"><label><input id="MERGE1" type="text" name="MERGE1" placeholder="Your name" class="form-control"></label></div><div class="col-sm-4 fields"><button type="submit" class="button-white btn btn-block">Subscribe</button></div></form><div class="form-backdrop"></div></div><div class="container sidebar-layout"><div class="row"><div class="col-md-9 col-lg-9"><header class="header-section"><div class="intro-header no-img"><div class="post-heading"><h1>Test Properties and Custom Events in Vue.js Components with Jest</h1><p class="post-meta">Posted on Sep 11 2017 · <a href="/tags/VueJS/" class="tag post-meta">VueJS</a> · <a href="/tags/JavaScript/" class="tag post-meta">JavaScript</a> · <a href="/tags/Testing/" class="tag post-meta">Testing</a></p></div></div></header><main class="post-content"><div class="post-serie-container">
              <div class="post-serie">
                  <header>
                      <span class="serie-badge">Serie</span>
                      <a href="/series/Unit-Testing-Vue-js-Components-with-the-Official-Vue-Testing-Tools-and-Jest" alt="Unit Testing Vue.js Components with the Official Vue Testing Tools and Jest">
                          Unit Testing Vue.js Components with the Official Vue Testing Tools and Jest
                      </a>
                  </header>

                  <ol class="post-list">
                      
                          <li false>
                              
                                  <a href="http://alexjoverm.github.io/2017/08/21/Write-the-first-Vue-js-Component-Unit-Test-in-Jest/" alt="Write the first Vue.js Component Unit Test in Jest">
                                      Write the first Vue.js Component Unit Test in Jest
                                  </a>
                              
                          </li>
                          <li false>
                              
                                  <a href="http://alexjoverm.github.io/2017/08/28/Test-Deeply-Rendered-Vue-js-Components-in-Jest/" alt="Test Deeply Rendered Vue.js Components in Jest">
                                      Test Deeply Rendered Vue.js Components in Jest
                                  </a>
                              
                          </li>
                          <li false>
                              
                                  <a href="http://alexjoverm.github.io/2017/09/04/Test-Styles-and-Structure-of-Vue-js-Components-in-Jest/" alt="Test Styles and Structure of Vue.js Components in Jest">
                                      Test Styles and Structure of Vue.js Components in Jest
                                  </a>
                              
                          </li>
                          <li class="current">
                              Test Properties and Custom Events in Vue.js Components with Jest
                          </li>
                          <li false>
                              
                                  <a href="http://alexjoverm.github.io/2017/09/18/Test-Computed-Properties-and-Watchers-in-Vue-js-Components-with-Jest/" alt="Test Computed Properties and Watchers in Vue.js Components with Jest">
                                      Test Computed Properties and Watchers in Vue.js Components with Jest
                                  </a>
                              
                          </li>
                          <li false>
                              
                                  <a href="http://alexjoverm.github.io/2017/09/25/Test-Methods-and-Mock-Dependencies-in-Vue-js-with-Jest/" alt="Test Methods and Mock Dependencies in Vue.js with Jest">
                                      Test Methods and Mock Dependencies in Vue.js with Jest
                                  </a>
                              
                          </li>
                          <li false>
                              
                                  <a href="http://alexjoverm.github.io/2017/10/02/Test-Vue-js-Slots-in-Jest/" alt="Test Vue.js Slots in Jest">
                                      Test Vue.js Slots in Jest
                                  </a>
                              
                          </li>
                          <li false>
                              
                                  <a href="http://alexjoverm.github.io/2017/10/07/Enhance-Jest-configuration-with-Module-Aliases/" alt="Enhance Jest configuration with Module Aliases">
                                      Enhance Jest configuration with Module Aliases
                                  </a>
                              
                          </li>
                  </ol>
              </div>
          </div><article role="main" class="blog-post"><p>There are different ways to test properties, events and custom events.</p>
<a id="more"></a>
<p>Properties are custom attributes passed from parent to child components. Custom events solve just the opposite, they send data out to the direct parent via an event. They both combined are the wires of interaction and communication in Vue.js components.</p>
<p>In Unit Testing, testing the in and outs (properties and custom events) means to test how a component behaves when it receives and sends out data in isolation. Let’s get our hands dirty!</p>
<h2 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h2><p>When we are testing component properties, we can test how the component behave when we pass them certain properties. But before going on, an important note:</p>
<blockquote>
<p>To pass properties to components, use <code>propsData</code>, and not <code>props</code>. The last one is to define properties, not to pass them data.</p>
</blockquote>
<p>First create a <code>Message.test.js</code> file and add the following code:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Message.test.js'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> cmp

  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Properties'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// @TODO</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>We group test cases within a <code>describe</code> expression, and they can be nested. So we can use this strategy to group the tests for properties and events separately.</p>
<p>Then we’ll create a helper factory function to create a message component, give some properties</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> createCmp <span class="token operator">=</span> propsData <span class="token operator">=</span><span class="token operator">></span> <span class="token function">mount</span><span class="token punctuation">(</span>Message<span class="token punctuation">,</span> <span class="token punctuation">{</span> propsData <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="Testing-property-existence"><a href="#Testing-property-existence" class="headerlink" title="Testing property existence"></a>Testing property existence</h3><p>Two obvious things we can test is that a property exists, or it doesn’t. Remember that the <code>Message.vue</code> component has a <code>message</code> property, so let’s assert that it receives correctly that property. vue-test-utils comes with a <code>hasProp(prop, value)</code> function, which is very handy for this case:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'has a message property'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  cmp <span class="token operator">=</span> <span class="token function">createCmp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token punctuation">:</span> <span class="token string">'hey'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>cmp<span class="token punctuation">.</span><span class="token function">hasProp</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token string">'hey'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>The properties behave in a way that they will be received only if they’re declared in the component. Meaning that if we pass a <strong>property that is not defined, it won’t be received</strong>. So to check for the no existence of a property, use a non-existing property:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'has no cat property'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  cmp <span class="token operator">=</span> <span class="token function">createCmp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> cat<span class="token punctuation">:</span> <span class="token string">'hey'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>cmp<span class="token punctuation">.</span><span class="token function">hasProp</span><span class="token punctuation">(</span><span class="token string">'cat'</span><span class="token punctuation">,</span> <span class="token string">'hey'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>However, in this case that test will fail because Vue has <a href="https://vuejs.org/v2/guide/components.html#Non-Prop-Attributes" target="_blank" rel="external">non-props attributes</a> which sets it to the root of the <code>Message</code> component, thus being recognized as a prop and then the test will return <code>true</code>. Changing it to <code>toBeTruty</code> will make it pass for this example:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'has no cat property'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  cmp <span class="token operator">=</span> <span class="token function">createCmp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> cat<span class="token punctuation">:</span> <span class="token string">'hey'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>cmp<span class="token punctuation">.</span><span class="token function">hasProp</span><span class="token punctuation">(</span><span class="token string">'cat'</span><span class="token punctuation">,</span> <span class="token string">'hey'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>We can test the <strong>default value</strong> as well. Go to <code>Message.vue</code> and change the props as follows:</p>
<pre class=" language-javascript"><code class="language-javascript">props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  message<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
  author<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'Paco'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<p>Then the test could be:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Paco is the default author'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  cmp <span class="token operator">=</span> <span class="token function">createCmp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token punctuation">:</span> <span class="token string">'hey'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>cmp<span class="token punctuation">.</span><span class="token function">hasProp</span><span class="token punctuation">(</span><span class="token string">'author'</span><span class="token punctuation">,</span> <span class="token string">'Paco'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="Asserting-properties-validation"><a href="#Asserting-properties-validation" class="headerlink" title="Asserting properties validation"></a>Asserting properties validation</h3><p>Properties can have validation rules, ensuring that a property is required or it is of a determined type. Let’s write the <code>message</code> property as follows:</p>
<pre class=" language-javascript"><code class="language-javascript">props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  message<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
    required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    validator<span class="token punctuation">:</span> message <span class="token operator">=</span><span class="token operator">></span> message<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Going further, you could use custom constructors types or custom validation rules, as you can see in <a href="https://vuejs.org/v2/guide/components.html#Prop-Validation" target="_blank" rel="external">the docs</a>. Don’t do this right now, I’m just showing it as an example:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token operator">...</span>
props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  message<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> Message<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// It's compared using instance of</span>
    <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Whenever a validation rule is not fulfilled, Vue shows a console.error. For example, for <code>createCmp({ message: 1 })</code>, the next error will be shown:</p>
<pre><code>[Vue warn]: Invalid prop: type check failed for prop &quot;message&quot;. Expected String, got Number.
(found in &lt;Root&gt;)
</code></pre><p>By the date of writing, vue-test-utils doesn’t have any utility to test this. We could use <code>jest.spyOn</code> to test it:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'message is of type string'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> spy <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>console<span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
  cmp <span class="token operator">=</span> <span class="token function">createCmp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span>expect<span class="token punctuation">.</span><span class="token function">stringContaining</span><span class="token punctuation">(</span><span class="token string">'[Vue warn]: Invalid prop'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  spy<span class="token punctuation">.</span><span class="token function">mockReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// or mockRestore() to completely remove the mock</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Here we’re spying on the console.error function, and checking that it shows a message containing a specific string. This is not an ideal way to check it, since we’re spying on global objects and relying on side effects.</p>
<p>Fortunately, there is an easier way to do it, which is by checking <code>vm.$options</code>. Here’s where Vue stores the component options “expanded”. With expanded I mean: you can define your properties in a different ways:</p>
<pre class=" language-javascript"><code class="language-javascript">props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span>

<span class="token comment" spellcheck="true">// or</span>

props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  message<span class="token punctuation">:</span> String
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// or</span>

props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  message<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> String
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>But they all will end up in the most expanded object form (like the last one). So if we check the <code>cmp.vm.$option.props.message</code>, for the first case, they all will be in the <code>{ type: X }</code> format (although for the first example it will be <code>{ type: null}</code>)</p>
<p>With this in mind, we could write a test suite to test that asserts that the <code>message</code> property has the expected validation rules:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Message.test.js'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Properties'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Validation'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token function">createCmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>props<span class="token punctuation">.</span>message

      <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'message is of type string'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'message is required'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>required<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'message has at least length 2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>validator <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span><span class="token function">validator</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeFalsy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>validator <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span><span class="token function">validator</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="Custom-Events"><a href="#Custom-Events" class="headerlink" title="Custom Events"></a>Custom Events</h2><p>We can test at least two things in Custom Events:</p>
<ul>
<li>Asserting that after an action an event gets triggered</li>
<li>Checking what an event listener calls when it gets triggered</li>
</ul>
<p>Which in the case of the <code>MessageList.vue</code> and <code>Message.vue</code> components example, that gets translated to:</p>
<ul>
<li>Assert that <code>Message</code> components triggers a <code>message-clicked</code> when a message gets clicked</li>
<li>Check in <code>MessageList</code> that when a <code>message-clicked</code> happens, a <code>handleMessageClick</code> function is called</li>
</ul>
<p>First, go to <code>Message.vue</code> and use <code>$emit</code> to trigger that custom event:</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token style-attr language-css"><span class="token attr-name">
      <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">10</span>px</span><span class="token punctuation">"</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span>
      <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>handleClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        {{message}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span>
  export default {
    name: 'Message',
    props: ['message'],
    methods: {
      handleClick() {
        this.$emit('message-clicked', this.message)
      }
    }
  }
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p>And in <code>MessageList.vue</code>, handle the event using <code>@message-clicked</code>:</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Message</span>
          <span class="token attr-name">@message-clicked</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>handleMessageClick<span class="token punctuation">"</span></span>
          <span class="token attr-name">:message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span>
          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>message in messages<span class="token punctuation">"</span></span>
          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span>
import Message from './Message'

export default {
  name: 'MessageList',
  props: ['messages'],
  methods: {
    handleMessageClick(message) {
      console.log(message)
    }
  },
  components: {
    Message
  }
}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p>Now it’s time to write a unit test. Create a nested describe within the <code>test/Message.spec.js</code> file and prepare the barebones of the test case <em>“Assert that <code>Message</code> components triggers a <code>message-clicked</code> when a message gets clicked”</em> that we mentioned before:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">...</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Message.test.js'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Events'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      cmp <span class="token operator">=</span> <span class="token function">createCmp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token punctuation">:</span> <span class="token string">'Cat'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'calls handleClick when click on message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// @TODO</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="Testing-the-Event-Click-calls-a-method-handler"><a href="#Testing-the-Event-Click-calls-a-method-handler" class="headerlink" title="Testing the Event Click calls a method handler"></a>Testing the Event Click calls a method handler</h3><p>The first thing we can test is that when clicking a message, the <code>handleClick</code> function gets called. For that we can use a <code>trigger</code> of the wrapper component, and a jest spy using <code>spyOn</code> function:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'calls handleClick when click on message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> spy <span class="token operator">=</span> <span class="token function">spyOn</span><span class="token punctuation">(</span>cmp<span class="token punctuation">.</span>vm<span class="token punctuation">,</span> <span class="token string">'handleClick'</span><span class="token punctuation">)</span>
  cmp<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// Forces to re-render, applying changes on template</span>

  <span class="token keyword">const</span> el <span class="token operator">=</span> cmp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.message'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>cmp<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>handleClick<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<blockquote>
<p>See the <code>cmp.update()</code>? When we change things that are used in the template, <code>handleClick</code> in this case, and we want the template to apply the changes, we need to use the <code>update</code> function.</p>
</blockquote>
<p>Keep in mind that by using a spy the original method <code>handleClick</code> will be called. Probably you intentionally want that, but normally we want to avoid it and just check that on click the methods is indeed called. For that we can use a Jest Mock function:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'calls handleClick when click on message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  cmp<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>handleClick <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  cmp<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> el <span class="token operator">=</span> cmp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.message'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>cmp<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>handleClick<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Here we’re totally replacing the <code>handleClick</code> method, accessible on the vm of the wrapper component returned by the mount function.</p>
<p>We can make it even easier by using <code>setMethods</code> helper that the official tools provide us:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'calls handleClick when click on message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> stub <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  cmp<span class="token punctuation">.</span><span class="token function">setMethods</span><span class="token punctuation">(</span><span class="token punctuation">{</span> handleClick<span class="token punctuation">:</span> stub <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> el <span class="token operator">=</span> cmp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.message'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>stub<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Using <strong><code>setMethods</code> is the suggested way</strong> to do it, since is an abstraction that official tools give us in case the Vue internals change.</p>
<h3 id="Testing-the-Custom-Event-message-clicked-is-emitted"><a href="#Testing-the-Custom-Event-message-clicked-is-emitted" class="headerlink" title="Testing the Custom Event message-clicked is emitted"></a>Testing the Custom Event <code>message-clicked</code> is emitted</h3><p>We’ve tested that the click method calls it’s handler, but we haven’t tested that the handler emits the <code>message-clicked</code> event itself. We can call directly the <code>handleClick</code> method, and use a Jest Mock function in combination with the Vue vm <code>$on</code> method:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'triggers a message-clicked event when a handleClick method is called'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> stub <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  cmp<span class="token punctuation">.</span>vm<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'message-clicked'</span><span class="token punctuation">,</span> stub<span class="token punctuation">)</span>
  cmp<span class="token punctuation">.</span>vm<span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>stub<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>See that here we’re using <code>toBeCalledWith</code> so we can assert exactly which parameters we expect, making the test even more robust. Not that we’re not using <code>cmp.update()</code> here, since we’re making no changes that need to propagate to the template.</p>
<h3 id="Testing-the-message-clicked-triggers-an-event"><a href="#Testing-the-message-clicked-triggers-an-event" class="headerlink" title="Testing the @message-clicked triggers an event"></a>Testing the @message-clicked triggers an event</h3><p>For custom events, we cannot use the <code>trigger</code> method, since it’s just for DOM events. But, we can emit the event ourselves, by getting the Message component and using its <code>vm.$emit</code> method. So add the following test to <code>MessageList.test.js</code>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Calls handleMessageClick when @message-click happens'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> stub <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  cmp<span class="token punctuation">.</span><span class="token function">setMethods</span><span class="token punctuation">(</span><span class="token punctuation">{</span> handleMessageClick<span class="token punctuation">:</span> stub <span class="token punctuation">}</span><span class="token punctuation">)</span>
  cmp<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> el <span class="token operator">=</span> cmp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>Message<span class="token punctuation">)</span><span class="token punctuation">.</span>vm<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'message-clicked'</span><span class="token punctuation">,</span> <span class="token string">'cat'</span><span class="token punctuation">)</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>stub<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeCalledWith</span><span class="token punctuation">(</span><span class="token string">'cat'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>I’ll leave up to you to test what <code>handleMessageClicked</code> does ;).</p>
<h2 id="Wrapping-up"><a href="#Wrapping-up" class="headerlink" title="Wrapping up"></a>Wrapping up</h2><p>Here we’ve seen several cases to test properties and events. <code>vue-test-utils</code>, the official Vue testing tools, makes this much easier indeed.</p>
<p>You can find the working code we’ve used here in <a href="https://github.com/alexjoverm/vue-testing-series/tree/Test-Properties-and-Custom-Events-in-Vue-js-Components-with-Jest" target="_blank" rel="external">this repo</a>.</p>

    <p><a class="twitter-share-button"
  href="https://twitter.com/intent/tweet?text=Test%20Properties%20and%20Custom%20Events%20in%20Vue.js%20Components%20with%20Jest&url=http://alexjoverm.github.io/2017/09/11/Test-Properties-and-Custom-Events-in-Vue-js-Components-with-Jest/&hashtags=VueJS%2CJavaScript%2CTesting&via=alexjoverm">Tweet</a></p>

    <p>If you like it, please go and share it!
    You can follow me <a href="https://egghead.io/instructors/alex-jover-morales">recording videos on Egghead</a>
    or on twitter as <a href="https://twitter.com/alexjoverm">@alexjoverm</a>. Any questions? Shoot!</p>
  </article><ul class="pager blog-pager"><li class="previous"><a href="/2017/09/18/Test-Computed-Properties-and-Watchers-in-Vue-js-Components-with-Jest/" data-toggle="tooltip" data-placement="top" title="Test Computed Properties and Watchers in Vue.js Components with Jest">← Previous Post</a></li><li class="next"><a href="/2017/09/04/Test-Styles-and-Structure-of-Vue-js-Components-in-Jest/" data-toggle="tooltip" data-placement="top" title="Test Styles and Structure of Vue.js Components in Jest">Next Post →</a></li></ul></main></div><div class="main-sidebar col-md-3 col-lg-3"><div class="sidebar-item"><header class="sidebar-item-header"><h4>New Ebook!</h4></header><div class="sidebar-item-content"><strong class="preface">Consider supporting this blog by buying the ebook</strong><a href="https://leanpub.com/testingvuejscomponentswithjest" target="_blank" onclick="ga('send', 'event', 'Book', 'click', 'Testing Vue.js components with Jest');"><img data-src="/images/vuejest.jpg" alt="Testing Vue.js components with Jest" class="v-padding-xs">Testing Vue.js components with Jest</a></div></div><div class="sidebar-item"><header class="sidebar-item-header"><h4>Courses</h4></header><div class="sidebar-item-content"><div class="course-item"><a href="https://egghead.io/courses/use-typescript-to-develop-vue-js-web-applications" target="_blank" onclick="ga('send', 'event', 'Course', 'click', 'Use Typescript to develop Vue.js web applications - Egghead');"><img data-src="/images/courses/vuets.png" alt="Use Typescript to develop Vue.js web applications">Use TypeScript to Develop Vue.js Web Applications</a></div><hr><div class="course-item"><a href="https://egghead.io/courses/vue-js-state-management-with-vuex-and-typescript" target="_blank" onclick="ga('send', 'event', 'Course', 'click', 'Vue.js state management with Vuex and TypeScript course - Egghead');"><img data-src="/images/courses/vuexts.png" alt="Vue.js state management with Vuex and TypeScript course">Vue.js State Management with Vuex and TypeScript</a></div></div></div></div></div><div class="row"><div id="signup-form-footer"><form action="https://github.us16.list-manage.com/subscribe/post" method="POST" class="form signup-form"><input type="hidden" name="u" value="534e314884644825b957a5eee"><input type="hidden" name="id" value="e05e60374d"><div class="close-button">&times;</div><h4 class="text-center">Get upcoming Guides, Series, EBooks and Courses!</h4><div class="col-sm-4 fields"><label><input id="MERGE0" type="email" required placeholder="Your email" autocapitalize="off" autocorrect="off" name="MERGE0" class="form-control"></label></div><div class="col-sm-4 fields"><label><input id="MERGE1" type="text" name="MERGE1" placeholder="Your name" class="form-control"></label></div><div class="col-sm-4 fields"><button type="submit" class="button-white btn btn-block">Subscribe</button></div></form></div><div class="disqus-comments"><div class="comments"><div id="disqus_thread"></div></div></div><script>var url_parts = window.location.href.split("?");
var disqus_url = url_parts[0];
(function () {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = "//alexjm-blog.disqus.com/embed.js";
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><p class="copyright text-muted">© Alex Jover Morales • 2018</p></div></div></footer><script>window.lazyLoadOptions = {};
</script><script src="/js/sw-register.js"></script><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script async src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/8.7.1/lazyload.min.js"></script><script async src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearchLite.min.js"></script><script async src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script><script>var algoliaConfig = document.querySelector('meta[property="algolia:search"]').dataset

// Initialize autocomplete menu
var client = algoliasearch(algoliaConfig.applicationId, algoliaConfig.apiKey)
var index = client.initIndex(algoliaConfig.indexName)
//initialize autocomplete on search input (ID selector must match)
autocomplete('#search-box', { hint: false, appendTo: 'body', debug: true }, {
  source: autocomplete.sources.hits(index, {hitsPerPage: 5}),
  //value to be displayed in input control after user's suggestion selection
  displayKey: 'name',
  //hash of templates used when rendering dataset
  templates: {
    //'suggestion' templating function used to render a single suggestion
    suggestion: function(suggestion) {
      let link = '<a href="'+ suggestion.permalink +'">' +
        suggestion._highlightResult.title.value + '</a>'

        // @Todo: add <span> with type before the link
        return link
      },
      footer: '<div class="branding">Powered by <img src="https://www.algolia.com/static_assets/images/press/downloads/algolia-logo-light.svg" /></div>'
    }
})
</script><script>window.twttr = (function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0],
t = window.twttr || {};
if (d.getElementById(id)) return t;
js = d.createElement(s);
js.id = id;
js.src = "https://platform.twitter.com/widgets.js";
fjs.parentNode.insertBefore(js, fjs);
t._e = [];
t.ready = function(f) {
t._e.push(f);
};
return t;
}(document, "script", "twitter-wjs"));

</script><script>(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
    a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-93226517-1', 'auto');
ga('send', 'pageview');</script></body></html>